<!DOCTYPE html>
<html lang="ko">
<head>
	<meta charset="UTF-8">
	<title>Title</title>
	<script>
        /*
		 	ex_05 todolist ì—ì„œ ì¶”ê°€
		 	- ê¸°ì¡´ì— ìˆë˜ ë°ì´í„°ë¥¼ ì…ë ¥í•˜ë©´ ë°ì´í„°ê°€ ì¡´ì œí•œë‹¤ê³  ê²½ê³ ì°½ ì¶œë ¥
		 	- ê¸°ì¡´ì— ìˆë˜ ë°ì´í„°ë¥¼ ì…ë ¥í•˜ê³  clear ë²„íŠ¼ í´ë¦­í•˜ë©´ ê·¸ ë°ì´í„° ì‚­ì œ

		 	* ì°¸ê³ : localStorage ê³µê°„ì´ ex_05ì™€ ê°™ì•„ì„œ ë°ì´í„° ì—°ë™ë˜ì–´ìˆìŒ!
	    */
        document.addEventListener("DOMContentLoaded", function () {
            const input = document.getElementById('todoInput');
            const addButton = document.getElementById('addButton');
            const clearButton = document.getElementById('clearButton');
            const clearAllButton = document.getElementById('clearAllButton');
            const todoList = document.getElementById('todoList');

            // ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸°
            let list = JSON.parse(localStorage.getItem('TodoList')) || []; // JSON ì´ null ì´ë©´ ë¹ˆë°°ì—´ ìƒì„±

            // ë°ì´í„° ì°¾ê¸°
            const findData = (value) => {
                let isData = false;
                list.forEach((item) => {
                    if (item === value) {
                        isData = true;
                    }
                });
                return isData;
            }


            const showList = () => {
                // ê¸°ì¡´ ë°ì´í„°ë¡œ í™”ë©´ì— li ì¶”ê°€
                list.forEach(item => {
                    const li = document.createElement('li');
                    li.textContent = String(item);
                    todoList.appendChild(li);
                });
            }

            // Add ë²„íŠ¼ í´ë¦­ ì‹œ
            addButton.addEventListener('click', function () {
                const value = input.value.trim(); // ë¹ˆì¹¸ì œê±° í›„ ì €ì¥
                if (findData(value)) {
					alert('ë¦¬ìŠ¤íŠ¸ê°€ ì´ë¯¸ ì¡´ì œí•©ë‹ˆë‹¤!');
                    return;
                }
                if (value === ''){
                    alert('ê°’ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!');
                    return;
                }
                const li = document.createElement('li');

                li.textContent = value;
                todoList.appendChild(li);

                list.push(value); //ë¦¬ìŠ¤íŠ¸ì— ì¶”ê°€
                localStorage.setItem('TodoList', JSON.stringify(list)); //ë¦¬ìŠ¤íŠ¸ ì—…ê·¸ë ˆì´ë“œ
                console.log(`updated :) [ ADD: ${value}]`);
                input.value = '';
            });

            clearButton.addEventListener('click', function () {
                const value = input.value.trim();
                if (value === ''){
                    alert('ê°’ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!');
                    return;
                }
                if(findData(value)){
                    list.splice(list.indexOf(value), 1);
                    localStorage.setItem('TodoList',JSON.stringify(list));
                    console.log(`updated :) [ DELETE: ${value}]`);
                    input.value = '';
                    todoList.innerHTML ='';
                    showList();
                    return;
			   }
                alert(`${value}ê°€ ë¦¬ìŠ¤íŠ¸ì— ì¡´ì œí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤!`);
            });

            // ClearAll ë²„íŠ¼ í´ë¦­ ëª¨ë‘ ì‚­ì œ
            clearAllButton.addEventListener('click', function () {
                if(confirm('ì •ë§ ëª¨ë‘ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? \nì‚­ì œí›„ì—ëŠ” ë³µêµ¬ í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.')){
                    localStorage.clear();
                    todoList.innerHTML = '';
                    list = [];
                    input.value = '';
                    alert("ëª¨ë‘ ì‚­ì œ ë˜ì—ˆìŠµë‹ˆë‹¤!");
                    console.log(`successfully cleared :)`);
				}

            });


            showList();
        });
	</script>
	<style>
		body{
			display: flex;
			flex-direction: column;
			align-items: center;
			justify-content: center;
			background-color: #aacaef;
		}
		h1{
			font-size: 44px;
		}

		div input{
			width: 500px;
			height: 50px;
			border-radius: 10px;
			text-align: center;
			font-size: 20px;
		}
		div button{
			width: 100px;
			height: 50px;
			text-align: center;
			border-radius: 5px;
        }

		ul{
			background-color: white ;
			width: 1000px;
			height: 700px;
			overflow-y: scroll;
			padding: 20px;
			display: flex;
			flex-direction: column;
			align-items: center;
		}
		li{
			font-size: 20px;

		}



	</style>
</head>
<body>
<h1>My To-Do List</h1>
<div>
	<label for="todoInput"></label><input type="text" id="todoInput" placeholder="Add a new task">
	<button id="addButton">â•Add</button>
	<button id="clearButton">ğŸ”Clear</button>
	<button id="clearAllButton">âŒClear All</button>
</div>
<ul id="todoList"></ul>
</body>
</html>