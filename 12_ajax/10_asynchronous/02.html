<!DOCTYPE html>
<html lang="ko">
<head>
	<meta charset="UTF-8">
	<title>Title</title>
	<script>
		/*

		* 비동기처리시 콜백패턴의 문제점
		1) 비동기 처리시 콜백 함수의 반환 타이밍은 명확히 알 수 없다.
		즉, 여러개의 비동기 처리가 동시적으로 일어난다면 각 콜백 함수가 반환하는 시점을 예측할 수 없음.

		3) 콜백 함수들의 순차적 처리가 필요한 경우 콜백 함수 내부에서 또 다른 콜백함수를 호출하여야 하며
		이는 콜백함수내에 콜백함수를 호출해야 하며 이로 인해 연쇄적인 콜백 헬(callback hell)이 만들어 짐

		3) ES6에서는 이러한 콜백 헬을 보완하기 위해 프라미스(Promise)가 추가됨
		 */
		// * 비동기 처리를 위한 콜백 패턴의 단점

		const get = url => {
            const xhr = new XMLHttpRequest();
            xhr.open('GET', url);
            xhr.send();

            xhr.onload = () => {
                if (xhr.status === 200) {
                    // 서버의 응답을 콘솔에 출력
                    console.log(JSON.parse(xhr.response));
				} else {
                    console.error(`${xhr.status} ${xhr.statusText}`);
				}
			}
		}
        get('https://jsonplaceholder.typicode.com/posts/1');
        console.log('순서 확인용');

        /*
        get 함수는 비동기 함수.
        비동기 함수를 호출하면 함수 내부의 비동기로 동작하는 코드가 완료되지 않았다 해도 기다리지 않고 즉시 종료됨.
        즉, 비동기 함수 내부의 비동기로 동작하는 코드는 비동기 함수가 종료도니 이후에 완료.
        따라서 비동기 함수 내부의 비동기도 동작하는 코드에서 처리 결과를 외부로 반환하거나 상위 스코프의 변수에 할당하면
        기대한 대로 동작하지 않음.
         */

	</script>
</head>
<body>

</body>
</html>